<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: tips | 飲んだり寝たり]]></title>
  <link href="http://nomnel.net/blog/categories/tips/atom.xml" rel="self"/>
  <link href="http://nomnel.net/"/>
  <updated>2013-06-05T16:06:19+09:00</updated>
  <id>http://nomnel.net/</id>
  <author>
    <name><![CDATA[nomnel]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rubyでサブクラスの取得]]></title>
    <link href="http://nomnel.net/blog/ruby-get-subclasses/"/>
    <updated>2013-06-05T16:00:00+09:00</updated>
    <id>http://nomnel.net/blog/ruby-get-subclasses</id>
    <content type="html"><![CDATA[<p>直接の子クラスのみなら</p>

<p>```ruby
class Class
  def subclasses</p>

<pre><code>ObjectSpace.each_object(Class).select{|klass| klass.superclass == self}
</code></pre>

<p>  end
end
```</p>

<p>子孫クラス(?)全てなら</p>

<p>```ruby
class Class
  def subclasses</p>

<pre><code>ObjectSpace.each_object(Class).select{|klass| klass &lt; self}
</code></pre>

<p>  end
end
```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rubyで配列展開]]></title>
    <link href="http://nomnel.net/blog/ruby-expand-array-as-function-arguments/"/>
    <updated>2013-06-05T01:00:00+09:00</updated>
    <id>http://nomnel.net/blog/ruby-expand-array-as-function-arguments</id>
    <content type="html"><![CDATA[<p>Rubyで引数に与える配列に*をつけると, 配列を展開することができる.</p>

<p>```ruby
def hoge args
  args = [*args]
end</p>

<p>hoge 1      # => [1]
hoge [1, 2] # => [1, 2]
```</p>

<p>便利.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[CentOSのバージョンとアーキテクチャの確認]]></title>
    <link href="http://nomnel.net/blog/confirm-centos-version/"/>
    <updated>2013-05-02T11:40:00+09:00</updated>
    <id>http://nomnel.net/blog/confirm-centos-version</id>
    <content type="html"><![CDATA[<p>```sh</p>

<h1>バージョン確認</h1>

<p>cat /etc/redhat-release</p>

<h1>=> CentOS release 6.4 (Final)</h1>

<h1>OSが64bitか32bitか</h1>

<p>arch</p>

<h1>=> x86_64</h1>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Railsでページ遷移前に確認ダイアログを表示する]]></title>
    <link href="http://nomnel.net/blog/rails-confirm-on-leaving-the-page/"/>
    <updated>2013-04-26T18:00:00+09:00</updated>
    <id>http://nomnel.net/blog/rails-confirm-on-leaving-the-page</id>
    <content type="html"><![CDATA[<p>実装のみ簡単に.</p>

<!-- more -->


<p>coffeeはこんな感じ.</p>

<p>```coffeescript
isChanged = false
$('#hoge').change ->
  isChanged = true</p>

<p>orgSubmit = $('input[type=submit]').onClick
$('input[type=submit]').click ->
  isChanged = false
  orgSubmit()</p>

<p>$(window).bind 'beforeunload', ->
  return unless isChanged
  '表示したいメッセージ'
```</p>

<p>specは</p>

<p>```ruby
scenario 'hogeを変更後にsubmit以外のページ遷移しようとしたときに確認ダイアログを表示' do
  find('#hoge').set 'My String'</p>

<p>  visit root_path
  expect(page.driver.confirm_messages[0]).to eq '表示したいメッセージ'
end
```</p>

<p>な感じ.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[rbenvを使っていてSublimeREPLでRubyのREPLが使えないとき]]></title>
    <link href="http://nomnel.net/blog/sublimerepl-cant-open-ruby-repl/"/>
    <updated>2013-04-20T18:00:00+09:00</updated>
    <id>http://nomnel.net/blog/sublimerepl-cant-open-ruby-repl</id>
    <content type="html"><![CDATA[<h3>現象</h3>

<p>SublimeREPLでRubyのREPLを開くと,</p>

<p><code>``ruby
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:777:in</code>report_activate_error': Could not find RubyGem pry (>= 0) (Gem::LoadError)
  from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:211:in <code>activate'
  from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:1056:in</code>gem'
  from /Users/nomnel/Library/Application Support/Sublime Text 2/Packages/SublimeREPL/config/Ruby/pry_repl.rb:2</p>

<p><strong><em>Repl Closed</em></strong>
```</p>

<p>というエラーが表示されるのみでREPLは使えない. <!-- more --></p>

<h3>対策</h3>

<p>まず, pryが入っていなかったら入れておく.</p>

<p><code>sh
rbenv exec gem install pry
</code></p>

<p>pryがインストール出来たら<code>~/Library/Application\ Support/Sublime\ Text\ 2/Packages/SublimeREPL/config/Ruby/Main.sublime-menu</code>を開き</p>

<p><code>json
"osx":[
  "ruby",
  "${packages}/SublimeREPL/config/Ruby/pry_repl.rb",
  "$editor"
]
</code></p>

<p>となっている箇所を探す. この2行目の<code>ruby</code>を<code>/Users/username/.rbenv/shims/ruby</code>に変えればおーけー. <code>~/.rbenv/shims/ruby</code>でないことに注意.</p>
]]></content>
  </entry>
  
</feed>
